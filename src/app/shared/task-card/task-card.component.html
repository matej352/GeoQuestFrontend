<main>
  <div class="configuration-container">
    <ng-container [ngSwitch]="task.type">
      <ng-container *ngSwitchCase="TaskType.SelectPolygon">
        <div class="left">
          <app-select-polygon-map
            [mapType]="getMapType(task.mapType)"
            [mapId]="task.id!.toString()"
            [answers]="task.options!.optionAnswers"
            [answer]="+task.answer!"
            [mode]="mode"
            (onPolygonSelected)="onSelectPolygonMapStudentAnswer($event)"
            [config]="{
              mapCenter: task.mapCenter,
              mapZoomLevel: task.mapZoomLevel
            }"
          ></app-select-polygon-map>
        </div>
        <div class="right">
          <div
            *ngIf="mode === TaskViewMode.DraftExamPreview"
            class="task-actions"
          >
            <fa-icon
              [icon]="trash"
              title="Obriši"
              (click)="deleteTask()"
            ></fa-icon>
          </div>
          <div class="task-index">{{ index + 1 }}. zadatak</div>
          <div class="form-container">
            <div class="form-group">
              <label for="question-type"> Tip zadatka </label>
              <div class="question-type">Odaberi na karti</div>
            </div>
            <div class="form-group-column">
              <label for="question"> Tekst zadatka </label>
              <div class="question" [innerHTML]="task.question"></div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="TaskType.SelectPoint">
        <div class="left">
          <app-select-point-map
            [mapType]="getMapType(task.mapType)"
            [mapId]="task.id!.toString()"
            [answers]="task.options!.optionAnswers"
            [answer]="+task.answer!"
            [mode]="mode"
            (onPointSelected)="onSelectPointMapStudentAnswer($event)"
            [config]="{
              mapCenter: task.mapCenter,
              mapZoomLevel: task.mapZoomLevel
            }"
          ></app-select-point-map>
        </div>
        <div class="right">
          <div
            *ngIf="mode === TaskViewMode.DraftExamPreview"
            class="task-actions"
          >
            <fa-icon
              [icon]="trash"
              title="Obriši"
              (click)="deleteTask()"
            ></fa-icon>
          </div>
          <div class="task-index">{{ index + 1 }}. zadatak</div>
          <div class="form-container">
            <div class="form-group">
              <label for="question-type"> Tip zadatka </label>
              <div class="question-type">Odaberi točku na karti</div>
            </div>
            <div class="form-group-column">
              <label for="question"> Tekst zadatka </label>
              <div class="question" [innerHTML]="task.question"></div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="TaskType.MarkPolygon">
        <div class="left">
          <app-mark-polygon-map
            [mapType]="getMapType(task.mapType)"
            [mapId]="task.id!.toString()"
            [answer]="task.answer!"
            [mode]="mode"
            (onPolygonMarked)="onMarkPolygonMapStudentAnswer($event)"
            [config]="{
              mapCenter: task.mapCenter,
              mapZoomLevel: task.mapZoomLevel
            }"
          ></app-mark-polygon-map>
        </div>
        <div class="right">
          <div
            *ngIf="mode === TaskViewMode.DraftExamPreview"
            class="task-actions"
          >
            <fa-icon
              [icon]="trash"
              title="Obriši"
              (click)="deleteTask()"
            ></fa-icon>
          </div>
          <div class="task-index">{{ index + 1 }}. zadatak</div>
          <div class="form-container">
            <div class="form-group">
              <label for="question-type"> Tip zadatka </label>
              <div class="question-type">Označi na karti</div>
            </div>
            <div class="form-group-column">
              <label for="question"> Tekst zadatka </label>
              <div class="question" [innerHTML]="task.question"></div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase="TaskType.NonMap">
        <div class="left">
          <app-non-map-map
            [mapType]="getMapType(task.mapType)"
            [mapId]="task.id!.toString()"
            [answer]="task.answer!"
            [nonMapPoint]="task.nonMapPoint!"
            [mode]="mode"
            (onPointMarked)="onMarkPointMapStudentAnswer($event)"
            (onAnswerSaved)="onNonMapMapStudentAnswer($event)"
            [config]="{
              mapCenter: task.mapCenter,
              mapZoomLevel: task.mapZoomLevel
            }"
          ></app-non-map-map>
        </div>
        <div class="right">
          <div
            *ngIf="mode === TaskViewMode.DraftExamPreview"
            class="task-actions"
          >
            <fa-icon
              [icon]="trash"
              title="Obriši"
              (click)="deleteTask()"
            ></fa-icon>
          </div>
          <div class="task-index">{{ index + 1 }}. zadatak</div>
          <div class="form-container">
            <div class="form-group">
              <label for="question-type"> Tip zadatka </label>
              <div class="question-type">Obično pitanje</div>
            </div>
            <div class="form-group-column">
              <label for="question"> Tekst zadatka </label>
              <div class="question" [innerHTML]="task.question"></div>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngSwitchCase="TaskType.MarkPoint">
        <div class="left">
          <app-mark-point-map
            [mapType]="getMapType(task.mapType)"
            [mapId]="task.id!.toString()"
            [answer]="task.answer!"
            [mode]="mode"
            (onPointMarked)="onMarkPointMapStudentAnswer($event)"
            [config]="{
              mapCenter: task.mapCenter,
              mapZoomLevel: task.mapZoomLevel
            }"
          ></app-mark-point-map>
        </div>
        <div class="right">
          <div
            *ngIf="mode === TaskViewMode.DraftExamPreview"
            class="task-actions"
          >
            <fa-icon
              [icon]="trash"
              title="Obriši"
              (click)="deleteTask()"
            ></fa-icon>
          </div>
          <div class="task-index">{{ index + 1 }}. zadatak</div>
          <div class="form-container">
            <div class="form-group">
              <label for="question-type"> Tip zadatka </label>
              <div class="question-type">Označi točkom na karti</div>
            </div>
            <div class="form-group-column">
              <label for="question"> Tekst zadatka </label>
              <div class="question" [innerHTML]="task.question"></div>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>
</main>
